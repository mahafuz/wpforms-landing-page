{"version":3,"sources":["script.js"],"names":["extractVideoID","url","match","length","injectScript","src","id","document","querySelector","tag","createElement","firstScriptTag","getElementsByTagName","parentNode","insertBefore","VideoPlayerYoutube","[object Object]","config","this","isScriptInjected","isScriptLoaded","events","onEnd","addEventListener","bind","init","play","eventName","callback","push","player","YT","Player","root","height","width","videoId","playerVars","showinfo","modestbranding","playsinline","rel","enablejsapi","onStateChange","onPlayerStateChange","event","data","forEach","interval","window","setInterval","clearInterval","injectIframe","playVideo","VideoPlayer","element","previewContainer","videoContainer","videoRoot","type","getAttribute","reset","addEventlisteners","console","error","setAttribute","hide","show","handleNotReady","log"],"mappings":"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","file":"script.js","sourcesContent":["const extractVideoID=function(e){const t=e.match(/^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/);return!(!t||11!=t[7].length)&&t[7]},injectScript=function({id:e,src:t}){if(document.querySelector(`#${e}`))return;const i=document.createElement(\"script\");i.src=t,i.id=e;const n=document.getElementsByTagName(\"script\")[0];n.parentNode.insertBefore(i,n)};class VideoPlayerYoutube{constructor(e){return this.isScriptInjected=!1,this.isScriptLoaded=!1,this.config=e,this.events={onEnd:[]},{addEventListener:this.addEventListener.bind(this),init:this.init.bind(this),play:this.play.bind(this)}}addEventListener(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]}injectIframe(){this.player=new YT.Player(this.config.root,{height:\"390\",width:\"640\",videoId:extractVideoID(this.config.url),playerVars:{showinfo:0,modestbranding:1,playsinline:1,rel:0},enablejsapi:1,events:{onStateChange:this.onPlayerStateChange.bind(this)}})}onPlayerStateChange(e){0===e.data&&this.events.onEnd.forEach((e=>{e()}))}init(){if(this.isScriptInjected)return;injectScript({id:\"video-player-iframe-youtube\",src:\"https://www.youtube.com/iframe_api\"}),this.isScriptInjected=!0;const e=window.setInterval((()=>{window.YT&&window.YT.Player&&(this.isScriptLoaded=!1,clearInterval(e),this.injectIframe())}),100)}play(){return!!this.player.playVideo&&(this.player.playVideo(),!0)}}class VideoPlayer{constructor(e,t){this.element=e,this.previewContainer=e.querySelector('[data-js=\"preview\"]'),this.videoContainer=e.querySelector('[data-js=\"video\"]');const i=e.querySelector('[data-js=\"video-root\"]'),n=e.getAttribute(\"data-player-type\"),r=e.getAttribute(\"data-player-url\");\"youtube\"===n?(this.Player=new VideoPlayerYoutube({root:i,url:r}),this.Player.init(),this.Player.addEventListener(\"onEnd\",this.reset.bind(this)),this.addEventlisteners()):console.error(\"Invalid video type. Things aren't going to work.\")}show(e){e.setAttribute(\"data-hidden\",\"false\")}hide(e){e.setAttribute(\"data-hidden\",\"true\")}play(){this.Player.play()?(this.hide(this.previewContainer),this.show(this.videoContainer)):this.handleNotReady()}reset(){this.show(this.previewContainer),this.hide(this.videoContainer)}handleNotReady(){console.log(\"Video isn't ready yet to be viewed. Try again in a few seconds.\")}addEventlisteners(){this.previewContainer.addEventListener(\"click\",this.play.bind(this))}}const player=document.querySelector(\".video-player\");new VideoPlayer(player);"]}